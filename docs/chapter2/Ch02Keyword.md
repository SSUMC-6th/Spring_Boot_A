# 개념 정리

## 서브넷

ip주소에서 네트워크 영역을 부분적으로 나눈 **부분 네트워크**

- 서브넷 마스크
    - ip 주소 체계의 네트워크 아이디와 호스트 아이디 분리
        ![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/c39b1f12-9b06-4633-9628-6d86e6e45bab)

      
        ![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/b7860cf9-7d0a-49c6-b07a-7355487ed02a)

        
    - ip 주소에서 서브넷마스크를 AND 계산하면 네트워크 아이디
    - 서브넷 마스크의 Network id는 1이 연속적으로 있어야 함, Host id는 0이 연속적으로 있어야 함
        
        
        192.168.32.0/24처럼 /24 같은 표시가 붙어있는 것을 확인할 수 있다. 이것은 서브넷 마스크의 bit 수(왼쪽에서부터 1의 개수)를 나타낸다.
        

## 서브넷팅

ip주소의 낭비를 막기위해 원본 네트워크를 여러개의 서브넷으로 분리하는 과정

⇒ **서브넷 마스크의 bit수를 증가시키는 것**

서브넷 마스크의 bit수를 1씩 증가시키면 할당할 수 있는 네트워크 2배수로 증가, 호스트의 수는 2배로 감소

![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/94a8679d-5635-4f99-82f8-83d39d9df382)


- 192.168.32.0 : **서브넷1**의 Network Address
- 192.168.32.1~192.168.32.126 : **서브넷1**의 host 할당 가능한 부분
- 192.168.32.127 : **서브넷1**의 Broadcast Address
- 192.168.32.128 : **서브넷2**의 NetworkAddress
- 192.168.32.129~192.168.32.254 : **서브넷2**의 host 할당 가능한 부분
- 192.168.32.255 : **서브넷2**의 Broadcast Address

**P1) 211.100.10.0/24 네트워크를 각 서브넷당 55개의 Host를 할당할 수 있도록 서브넷팅 한다고 하자.**

a) 서브넷 마스크를 구하시오.

$2^6=64$이므로 32-6=26개가 subnet마스크의 bit수

11111111.11111111.11111111.11000000 

→ 255.255.255.192

b) 서브넷의 개수를 구하시오.

2비트 → $2^2=4$, 4개

c) 첫 번째 서브넷의 broadcast 주소를 구하시오.

→ 211.100.10.01전까지.

211.100.10.63

d) 마지막 서브넷의 network address를 구하시오.

211.100.10.192

e) 두 번째 서브넷의 사용 가능한 IP 범위를 구하시오.

211.100.10.65~211.100.10.126

## 라우팅

<aside>
💡 목적지까지 데이터 또는 메세지를 체계적으로 다른 네트워크에 전달하는 경로 선택 (Path Determination) 그리고 스위칭 (Switching)하는 과정

</aside>

- 필요한 것
    - 출발지/목적지의 네트워크 정보
    - 목적지로 가는 모든 경로
        - 모든 경로를 알아야 최적 경로를 선택할 수 있음
    - 최적 경로
    - 지속적인 네트워크 상태 확인
- 라우팅 테이블
    - 목적지까지 갈 수 있는 모든 가능성 있는 경로들 중 가장 효율적이라고 판단되는 경로를 모아둔 공간

## IP

<aside>
💡 인터넷에 연결되어 있는 모든 장치들을 식별할 수 있도록 각각의 장비에 부여되는 **고유 주소**

</aside>

### IPv4

4개의 숫자가 점으로 분리된 10진수 형식으로 표현

![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/ff2bccd8-3d41-495d-bff4-d0d90d0f09ca)

⇒ 32bit로 이루어진 주소

### IPv6

IPv4의 주소체계를 128비트로 확장한 인터넷 프로토콜 주소

16비트씩 8자리로 구성, 각 자리는 콜론으로 구분

![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/3ab04469-9530-4f2b-aa13-cc8f166686d4)

⇒ 16*8, 128bit로 이루어짐

### IP의 구분

- 고정 IP
    - 변하지 않고 컴퓨터에 고정적으로 부여된 IP, 보안성이 우수하기 때문에 보안업체, 기관에서 사용
- 유동 IP
    - 인터넷 사용자 모두에게 고정 IP를 부여해 주기는 힘들기 때문에, 일정한 주기 또는 사용자들이 인터넷에 접속하는 매 순간마다 사용하고 있지 않은 **IP 주소를 임시로 발급해 주는 IP**
    - 대부분의 사용자가 사용
- 공인 IP
    - IP관리 기관에서 ISP에 IP주소 부여, ISP에서 제공받은 IP
    - 전세계에서 유일
- 사설 IP (=로컬 IP)
    - 사설 IP 대역
        
        > 10.0.0.0 ~ 10.255.255.255 (10.0.0.0/8)
        > 
        > 
        > 172.16.0.0 ~ 172.31.255.255 (172.16.0.0/12)
        > 
        > 192.168.0.0 ~ 192.168.255.255 (192.168.0.0/16)
        > 
    - 공유기에 연결되어 있는 가정이나 회사의 각 네트워크 기기는 사설 IP 할당 받음 (공유기까지는 공인 IP 할당)
    - 어떤 네트워크 안에서만 내부적으로 사용되는 고유한 주소
    - 하나의 네트워크 안에서 유일
    - 공인 IP는 외부, 내부 상관없이 해당 IP에 접속 가능하지만 사설 IP는 내부에서만 접근 가능
        
        ![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/994a868e-94cf-444e-b6ba-e6a01839d43e)
        
        - 반 : 사설망
        - 반장 : Gateway (192.168.0.1 ↔ 181.227.3.33)
        - 반 학생들 : 각 컴퓨터들 (192.168.0.2, 192.168.0.3, 192.168.0.4 ...)
        - 학교 : 외부 인터넷 (61.123.44.1)
        
        국대학교 안에서 사용하는 192.168.10.2 아이피와 숭실대학교 안에서 사용하는 192.168.10.2 아이피는 **번호는 같을지언정 전혀 다른 목적지 주소**를 나타내게 된다. 그리고 같은 번호 아이피를 구분하는 수단은 2학년 1반 처럼 외부에서 할당받은 전 세계에서 유일한 **공인IP(181.277.3.33)**로 구분한다.
        
        ![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/065dc074-e068-4e7a-95a4-2d261b5f3c00)


        

### NAT

Network Address Translation, 인터넷 주소 번역 기능 ⇒ 외부 인터넷 입장에서 주소번호가 똑같은 사설 IP를 구분하기 위해서.

![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/15740c23-5588-464f-a9e2-0c5c09faa0ea)


외부에서는 어떤 사설 IP가 보냈는지 알지 못하지만, 답변을 하면 라우터가 이전 요청 정보들을 기억해서 해당 사설 IP로 답변을 넘겨줌

## CIDR

<aside>
💡 Classless Inter-Domain Routing
  
클래스 없는 도메인간 라우팅 기법

=도메인간의 라우팅에 사용되는 인터넷 주소를 원래 IP주소 클래스 체계를 쓰는 것보다 더욱 능동적으로 할 수 있도록 할당하여 지정하는 방식

**서브네팅 ⊂ CIDR**

</aside>

### AWS CIDR

![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/1ebdf259-3923-49b7-9192-e4ea8ccde540)


- AWS에서는 자체 클라우드에서 설정해 사용하고 있는 IP가 있기 때문에 2개가 아니라 총 5개 제외해야 한다.
    
    
    | 10.0.0.0 | 네트워크 주소 (Network ID) |
    | --- | --- |
    | 10.0.0.1 | AWS에서 VPC 라우터용으로 예약 (Default Gateway) |
    | 10.0.0.2 | DNS 서버 주소DNS 서버의 IP 주소는 기본 VPC 네트워크 범위에 2를 더한 주소이다.CIDR 블록이 여러 개인 VPC의 경우, DNS 서버의 IP 주소가 기본 CIDR에 위치하게 된다. |
    | 10.0.0.3 | AWS에서 앞으로 사용하려고 예약한 주소 |
    | 10.0.0.255 | 네트워크 브로드캐스트 주소 |

# AWS

![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/016af01f-13b5-481c-9b6f-bc7743d2da25)



- 리전
    - 가용 영역이 2개 이상으로 구성된 물리적인(지리적인) 영역
    - 리전 하나당 최대 5개의 VPC 가능
    - 각 리전에는 default VPC가 하나씩 존재한다
    - 각 리전마다 존재하는 VPC들은 IP대역이 겹치면 안된다
- 가용영역
    - 1개 이상의 물리적인 데이터 센터를 묶어놓은 논리적인 데이터 센터
    - 데이터센터에 물리적인 장애가 발생하더라도 가용영역 간에는 영향 x

### VPN

- Virtual Private Network
- 가상 사설망 → 같은 네트워크상에 있지만 논리적으로 다른 네트워크처럼 동작
    
    ![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/5872b046-482c-4336-891c-8ca36cf5a083)

    

### VPC

- Virtual Private Cloud

![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/447108ca-fa50-4f69-8f98-90bdf28fbc64)


- VPC별로 네트워크를 구성할 수 있다. 각각의 VPC에 따라 다르게 네트워크 설정을 줄 수 있으며, 각각의 VPC는 완전히 독립된 네트워크처럼 작동한다.
    - VPC 안에 서브넷 만들 수 있음 (VPC를 잘개 쪼개는 과정)
        
        ![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/67d734dc-8584-4d73-8aef-a55c2793ecc2)
        172.31.0.0/16인 VPC 안의 네트워크 범위를 갖는 네트워크 요청은 로컬에서 찾음
        
        **⇒ VPC 내부적으로 라우터가 있다. VPC 내부 서브넷끼리 통신 가능**
        

<aside>


**💡 외부에서 통신 하려면?**

인터넷 게이트웨이 사용 → 인터넷 게이트웨이를 거치면 외부와 통신이 가능

</aside>

![image](https://github.com/SSUMC-6th/Spring_Boot_A/assets/118423039/906f8488-47fd-4ffc-b2f0-5fb23b2143c3)

인터넷 게이트웨이를 통해 밖으로 나가도록 라우팅 테이블 설정을 해줘야 함
목적지의 주소가 172.31.0.0/16에 매칭되는지 확인한 후, 매칭되지 않으면 IGA A로 보낸다
0.0.0.0/0 → 모든 IP 주소를 의미

- public subnet: VPC 서브넷 중 외부와 통신이 원활하게 되는 서브넷 대역 (인터넷과 연결되어 있는 서브넷)
    
    <aside>
    
    **Destination : 10.0.0.0/16**
    
    **Target  : Local**
    
    </aside>
    
- private subnet: 외부와 통신이 되지 않는 서브넷 대역 (인터넷과 연결되어있지 않은 서브넷)
    - 릴리즈 서버에서 사용 (고객의 데이터가 저장된 데이터베이스 보호해야 함) → 데이터베이스를 private subnet에 배치
