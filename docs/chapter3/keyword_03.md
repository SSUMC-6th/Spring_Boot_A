### ν”„λ΅μ‹λ€?

---

- ν”„λ΅μ‹(proxy)λ” `λ€λ¦¬`μ μλ―Έλ΅,
    
    λΉ λ¥Έ μ•΅μ„Έμ¤μ™€ μ•μ „ν• ν†µμ‹ μ„ ν™•λ³΄ν•κΈ° μ„ν• μ¤‘κ³„ μ„λ²„λ¥Ό `ν”„λ΅μ‹ μ„λ²„`λΌκ³  μΌμ»«λ”λ‹¤.Β 
    
- ν΄λΌμ΄μ–ΈνΈμ™€ μ›Ή μ„λ²„ μ¤‘κ°„μ— μ„μΉν•κ³  μμ–΄, **"λ€λ¦¬"λ΅ ν†µμ‹ μ„ λ°›μ•„μ£Όλ” κ°λ…**μ΄λΌ μƒκ°ν•λ©΄ λλ‹¤.

> λ„¤νΈμ›ν¬μ— μ—°κ²°λ λ¨λ“  μ»΄ν“¨ν„°μ—λ” IPκ°€ μλ‹¤. 
> λ§μ°¬κ°€μ§€λ΅ ν”„λ΅μ‹ μ„λ²„λ”Β **λ„¤νΈμ›ν¬μ μμ²΄ IP μ£Όμ†κ°€ μλ” μ»΄ν“¨ν„°**μ΄λ‹¤. 
> κ·Έλ¬λ‚ λ•λ΅λ” μ ν•λ μ›Ή μ‚¬μ΄νΈλ‚ μ„λ²„μ— μ•΅μ„Έμ¤ν•μ—¬ IPμ£Όμ†λ¥Ό ν‘μ‹ν•μ§€ μ•μΌλ ¤λ” κ²½μ°λ„ μλ‹¤. 
> μ΄λ° κ²½μ°, ν”„λ΅μ‹ μ„λ²„λ¥Ό μ‚¬μ©ν•μ—¬ κ°™μ€ κ²°κ³Όλ¥Ό λ‹¬μ„±ν•  μ μλ‹¤.

ν”„λ΅μ‹ μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μμ‹  μ”μ²­μ„ μλ½ν•κ³  μ΄λ¬ν• μ”μ²­μ„ λ€μƒ μ„λ²„λ΅ μ „λ‹¬ν•λ” 
μΈν„°λ„·μƒμ μ»΄ν“¨ν„°μ΄λ©° μµμΆ… μ‚¬μ©μμ™€ μΈν„°λ„· μ‚¬μ΄μ κ²μ΄νΈ μ—­ν• μ„ ν•λ‹¤. 

μ•μ—μ„ μ–ΈκΈ‰ν–λ“― μμ²΄ IP μ£Όμ†κ°€ μμΌλ©°, ν΄λΌμ΄μ–ΈνΈ μ‹μ¤ν…κ³Ό μ›Ή μ„λ²„λ¥Ό κΈ€λ΅λ² λ„¤νΈμ›ν¬μ—μ„ λ¶„λ¦¬ν•λ‹¤.

β†’ μ¦‰, ν”„λ΅μ‹ μ„λ²„λ¥Ό ν†µν•΄ λ‹¤λ¥Έ IP μ£Όμ†λ¥Ό κ°€μ§„ μ›Ή μ‚¬μ΄νΈμ— μ•΅μ„Έμ¤ ν•  μ μλ‹¤.

![poster](./images/02.png)

**ν”„λ΅μ‹ μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ„ μλ½ν•κ³  λ‹¤μ μ΅°κ±΄μ— λ”°λΌ μ‘λ‹µμ„ μƒμ‚°ν•λ‹¤.**

1.   μ”μ²­λ λ°μ΄ν„° λλ” νμ΄μ§€κ°€ λ΅μ»¬ μΊμ‹μ— μ΄λ―Έ μλ” κ²½μ°, 

ν”„λ΅μ‹ μ„λ²„ μμ²΄κ°€ ν•„μ”ν• κ²€μƒ‰μ„ ν΄λΌμ΄μ–ΈνΈμ— μ κ³µν•λ‹¤.

2. μ”μ²­ν• λ°μ΄ν„° λλ” νμ΄μ§€κ°€ λ΅μ»¬ μΊμ‹μ— μ—†λ” κ²½μ° ν”„λ΅μ‹ μ„λ²„λ” ν•΄λ‹Ή μ”μ²­μ„ λ€μƒ μ„λ²„λ΅ μ „λ‹¬ν•λ‹¤.

3. ν”„λ΅μ‹ μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ— μ‘λ‹µμ„ μ „μ†΅ν•κ³  λν• ν΄λΌμ΄μ–ΈνΈμ— `μΊμ‹`λλ‹¤.

λ”°λΌμ„ ν”„λ΅μ‹ μ„λ²„λ” μ„λ²„λΏ μ•„λ‹λΌ ν΄λΌμ΄μ–ΈνΈ μ—­ν• λ„ ν•λ‹¤κ³  ν•  μ μλ‹¤.

### Forward Proxy

---

μΌλ°μ μΌλ΅ ν”„λ΅μ‹λΌκ³  ν•λ©΄ ν¬μ›λ“ ν”„λ΅μ‹λ¥Ό λ»ν•λ‹¤.Β 
**ν΄λΌμ΄μ–ΈνΈ λ€μ‹  ν”„λ΅μ‹ μ„λ²„κ°€ λ©μ  μ„λ²„μ— ν†µμ‹ ν•΄μ£Όλ” κµ¬μ„±**μ„ λ§ν•λ‹¤.

- ex) νμ‚¬ λ‚΄λ¶€ μΈνΈλΌλ„·μ—μ„ μΈν„°λ„·μƒμ— μλ” μ„λ²„μ— μ”μ²­ν•  λ• λ¨Όμ € ν”„λ΅μ‹ μ„λ²„λ¥Ό νΈμ¶ν•λ” λ°©μ‹.

λ§μ•½ proxy serverκ°€ μ—†λ‹¤λ©΄ μ•„λμ²λΌ ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘μ μΌλ΅ μ•΅μ„Έμ¤ν•  μ μλ‹¤.

![poster](./images/03.png)

λ°λ©΄ ν¬μ›λ“ ν”„λ΅μ‹λ¥Ό μ‚¬μ©ν•λ©΄ μ„λ²„μ—κ² **ν΄λΌμ΄μ–ΈνΈκ°€ λ„κµ¬μΈμ§€ κ°μ¶ μ** μλ‹¤. 
μ„λ²„κ°€ μ‘λ‹µλ°›μ€ IPλ” ν¬μ›λ“ ν”„λ΅μ‹ μ„λ²„μ IPμ΄κΈ° λ•λ¬Έμ— ν΄λΌμ΄μ–ΈνΈκ°€ λ„κµ°μ§€ μ• μ μ—†λ‹¤.

![poster](./images/04.png)

- μ°λ¦¬κ°€Β `http://racoon.com` νμ΄μ§€λ¥Ό μ”μ²­ν•λ©΄ ν¬μ›λ“ ν”„λ΅μ‹ μ„λ²„κ°€ **λ¦¬μ†μ¤λ¥Ό λ€μ‹  λ°›μ•„μ™€** ν΄λΌμ΄μ–ΈνΈμ—κ² λ‚΄λ°€μ–΄μ¤€λ‹¤(forward).
- **μΈν„°λ„·λ³΄λ‹¤ ν”„λ΅μ‹ μ„λ²„λ¥Ό λ¨Όμ € νΈμ¶ν•κ² λλ©΄ ν¬μ›λ“ ν”„λ΅μ‹**μΈ κ²ƒμ΄λ‹¤.

![poster](./images/05.png)

### Foward Proxy μ΄μ 

---

- **ν΄λΌμ΄μ–ΈνΈΒ λ³΄μ•Β μΈ΅λ©΄**
    - λ³΄ν†µ μ •λ¶€, κΈ°μ—… κ°™μ€ κΈ°κ΄€μ—μ„ μ ν•μ μΈ μΈν„°λ„· μ‚¬μ©μ„ μ„ν• `λ°©ν™”λ²½`κ³Ό κ°™μ€ κ°λ…μΌλ΅ μ‚¬μ©
    - λ°©λ¬Έν•λ ¤λ” μ›Ήμ— μ§μ ‘μ μΈ λ°©λ¬Έμ„ λ°©μ§€ν•  μ μμ
    - λ£°μ„ μ¶”κ°€ν•λ©΄ μ‚¬μ©μ μ „μ›μ μ™Έλ¶€ μ›Ήμ‚¬μ΄νΈλ΅μ μ•΅μ„Έμ¤λ¥Ό ν•„ν„°λ§ν•  μλ„ μμ
        
        β†’ **λ¬΄μ΅°κ±΄ ν”„λ΅μ‹ μ„λ²„λ¥Ό κ²½μ **ν•κΈ° λ•λ¬Έ!
        
- **ν”„λ΅μ‹ μ„λ²„λ” νμ΄μ§€ μ„λ²„μ μ •λ³΄λ¥ΌΒ μΊμ‹±ν•΄λ‘”λ‹¤.**
    - λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈκ°€ ν•΄λ‹Ή νμ΄μ§€λ¥Ό μ”μ²­ν•  λ•, μΊμ‹±λ μ •λ³΄λ¥Ό κ·Έλ€λ΅ λ°ν™ν•  μ μλ‹¤.
    - μ„λ²„μ λ¶€ν•λ¥Ό μ¤„μ΄λ” ν¨κ³Όκ°€ μλ‹¤.
- **ν΄λΌμ΄μ–ΈνΈμ μ”μ²­μ€ ν¬μ›λ“ ν”„λ΅μ‹ μ„λ²„λ¥Ό ν†µκ³Όν•  λ•Β μ•”νΈν™”λλ‹¤.**
    - μ•”νΈν™”λ μ”μ²­μ€ λ‹¤λ¥Έ μ„λ²„λ¥Ό ν†µκ³Όν•  λ• ν•„μ”ν• μµμ†ν•μ μ •λ³΄λ§ κ°€μ§ β†’ λ³΄μ• ν¨κ³Ό
    - λ”°λΌμ„ λ³Έ μ„λ²„μ—μ„ IP μ£Όμ†λ¥Ό μ—­μ¶”μ ν•΄λ„ ν¬μ›λ“ ν”„λ΅μ‹ μ„λ²„μ IP μ£Όμ†λ§ λ³΄μ—¬ μ •μ²΄λ¥Ό νμ•…ν•κΈ° μ–΄λ µλ‹¤.

### Reverse Proxy

---

- ν¬μ›λ“ ν”„λ΅μ‹μ™€ λ‹¬λ¦¬ Web Server μ½μ— μ„μΉν•μ—¬ ν΄λΌμ΄μ–ΈνΈμ μ ‘κ·Όμ„ μµμ΄λ΅ λ°›μ•„
    
    λ¦¬ν€μ¤νΈμ— ν•΄λ‹Ήν•λ” Web Serverμ— λ°°λ¶„ν•΄μ£Όλ” μ—­ν• μ„ ν•¨
    
- ν΄λΌμ΄μ–ΈνΈλ” μ›Ή μ„λΉ„μ¤μ— μ ‘κ·Όν•  λ• **ν”„λ΅μ‹ μ„λ²„λ΅ μ”μ²­**ν•κ² λκ³ ,
    
    ν”„λ΅μ‹κ°€ λ°°ν›„(reverse)μ μ„λ²„λ΅λ¶€ν„° λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤λ” λ°©μ‹μ΄λ‹¤.
    

![poster](./images/06.png)

λ¦¬λ²„μ¤ ν”„λ΅μ‹λ” **μ„λ²„κ°€ λ„κµ¬μΈμ§€λ¥Ό κ°μ¶”λ” μ—­ν• **μ„ ν•λ‹¤. 
ν΄λΌμ΄μ–ΈνΈλ” λ¦¬λ²„μ¤ ν”„λ΅μ‹ μ„λ²„λ¥Ό λ¨Όμ € νΈμ¶ν•κ² λκΈ°μ— μ‹¤μ  μ„λ²„μ IPλ¥Ό μ• μ μ—†λ‹¤.

λ‚΄λ¶€ μ„λ²„κ°€ μ§μ ‘ μ„λΉ„μ¤λ¥Ό μ κ³µν•΄λ„ λμ§€λ§ μ΄λ ‡κ² κµ¬μ„±ν•λ” μ΄μ λ”Β **λ³΄μ•**Β λ•λ¬Έμ΄λ‹¤.

> λ³΄ν†µ κΈ°μ—…μ λ„¤νΈμ›ν¬ ν™κ²½μ—μ„λ”Β `DMZ`λΌκ³  λ¶€λ¥΄λ” λ‚΄λ¶€ λ„¤νΈμ›ν¬/μ™Έλ¶€ λ„¤νΈμ›ν¬ μ‚¬μ΄μ— μ„μΉν•λ” κµ¬κ°„μ΄ μ΅΄μ¬ν•λ‹¤. 
> μ΄ κµ¬κ°„μ—λ” λ³΄ν†µ λ©”μΌ μ„λ²„, μ›Ή μ„λ²„, FTP μ„λ²„ λ“± μ™Έλ¶€ μ„λ²„λ¥Ό μ κ³µν•λ” μ„λ²„κ°€ μ„μΉν•κ² λλ‹¤.
> WASλ¥ΌΒ `DMZ`μ— λ†“κ³  μ„λΉ„μ¤ν•΄λ„ λμ§€λ§ WASλ” DBμ™€ μ—°κ²°λμ–΄ μμΌλ―€λ΅, WASκ°€ ν•΄ν‚Ήλ‹Ήν•  κ²½μ° DBκΉμ§€ ν•΄ν‚Ήλ‹Ήν•  μ μλ” λ¬Έμ λ¥Ό μ΄λν•  μ μλ‹¤. 
> λ”°λΌμ„Β **λ¦¬λ²„μ¤ ν”„λ΅μ‹ μ„λ²„λ¥Ό**Β `DMZ`**μ— λ‘κ³  μ‹¤μ  μ„λΉ„μ¤ μ„λ²„λ” λ‚΄λ¶€λ§μ— μ„μΉμ‹ν‚¨ ν›„ μ„λΉ„μ¤ν•λ” κ²ƒμ΄ μΌλ°μ **μ΄λ‹¤.

<aside>
π”¥ ν”ν μ„λ²„ μ•„ν‚¤ν…μ²λ΅ κµ¬μ„±ν•λ” web server(nginx) - WAS(tomcat) λ¶„λ¦¬ ν•νƒλ¥Ό reverse proxyλΌκ³  λ³΄λ©΄ λ¨ !
</aside>

![poster](./images/07.png)

### Reverse Proxy μ΄μ 

---

- **μ„λ²„λ¥Ό λ¶€λ‹΄ λ¶„μ‚°ν•  μ μλ‹¤.**
    - μ λ…ν• μ›Ή μ‚¬μ΄νΈ β†’ λ€λ‰μ νΈλν”½μ„ ν•λ‚μ μ‹±κΈ€ μ„λ²„λ΅ κ°λ‹Ήν•κΈ° μ–΄λ ¤μ›€
    - λ¦¬λ²„μ¤ ν”„λ΅μ‹ μ„λ²„λ¥Ό μ—¬λ¬κ°μ λ³Έ μ„λ²„λ“¤ μ•μ— λ‘μ–΄ νΉμ • μ„λ²„κ°€ κ³Όλ¶€ν™”λ μ§€ μ•κ² `λ΅λ“λ°Έλ°μ‹±`
    - ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ μ—¬λ¬ λ€μ μ„λ²„λ΅ λ¶„μ‚°μ‹μΌμ„, 
    μ„λ²„μ λ¶€ν•λ¥Ό κ³¨κ³ λ£¨ λ¶„μ‚°ν•μ—¬ μ„λ²„ μ„±λ¥μ„ μµμ ν™”ν•κ³ , μ„λ²„ λ‹¤μ΄ μ‹κ°„μ„ μ¤„μΈλ‹¤.
- **ν™•μ¥μ„±**
    - μƒλ΅μ΄ μ„λ²„λ¥Ό κ°„λ‹¨ν ν”„λ΅μ‹ μ„λ²„μ— μ¶”κ°€ν•κ±°λ‚ ν•„μ” μ—†μ–΄μ§„ μ„λ²„λ¥Ό μ κ±°ν•  μ μλ‹¤.
- **μ„λ²„ λ³΄μ•Β μΈ΅λ©΄**
    - λ¦¬λ²„μ¤ ν”„λ΅μ‹ μ„λ²„λ¥Ό λ‘λ©΄ λ³Έ μ„λ²„μ IP μ£Όμ†λ¥Ό κ°μ¶ μ μλ‹¤ β†’ ν•΄ν‚Ή λ°©μ–΄
    - μ”μ²­μ„ ν•„ν„°λ§ν•κ³  μμ‹¬μ¤λ¬μ΄ νΈλν”½μ„ μ°¨λ‹¨ν•μ—¬ μ•…μμ μΈ νΈλν”½μΌλ΅λ¶€ν„° λ°±μ—”λ“ μ„λ²„λ¥Ό λ³΄νΈ
- **ν¬μ›λ“ ν”„λ΅μ‹μ™€ μ μ‚¬ν•κ²Β μΊμ‹± κΈ°λ¥μ„ κ°–κ³  μλ‹¤.**
    - μμ£Ό μ•΅μ„Έμ¤ν•λ” μ½ν…μΈ λ¥Ό μΊμ‹ν•κ³  ν΄λΌμ΄μ–ΈνΈμ— μ§μ ‘ μ κ³µ β†’ μ‘λ‹µ μ‹κ°„ ν–¥μƒ

### Foward Proxy & Reverse Proxy

---

- ν¬μ›λ“ ν”„λ΅μ‹ : ν΄λΌμ΄μ–ΈνΈ λ‹¨, λ¦¬λ²„μ¤ ν”„λ΅μ‹: μ„λ²„ λ‹¨

| Forward Proxy μ„λ²„ | ν΄λΌμ΄μ–ΈνΈ μ•μ— λ†“μ—¬μ Έ μμ |
| --- | --- |
| Reverse Proxy μ„λ²„ | μ›Ήμ„λ²„/WAS μ•μ— λ†“μ—¬ μμ |

| Forward Proxy μ„λ²„ | `ν΄λΌμ΄μ–ΈνΈλ¥Ό λ³΄νΈ`, μ§μ ‘ μ„λ²„ URLλ΅ μ”μ²­μ„ λ³΄λ‚΄κ³  λ‚΄λ¶€λ§μ—μ„ ν¬μ›λ“ ν”„λ΅μ‹ μ„λ²„λ¥Ό νΈμ¶ν•μ—¬ ν”„λ΅μ‹κ°€ μ”μ²­μ„ λ³΄λ‚΄κ² λμ–΄ β†’ μ„λ²„μ—κ² ν΄λΌμ΄μ–ΈνΈλ¥Ό κ°μ¶ μ μλ‹¤. |
| --- | --- |
| Reverse Proxy μ„λ²„ | `μ„λ²„λ¥Ό λ³΄νΈ`, ν”„λ΅μ‹ μ„λ²„ URLλ΅λ§ μ ‘κ·Όμ΄ κ°€λ¥ν•μ—¬ λ³Έ μ„λ²„μ IP μ •λ³΄λ¥Ό μ¨κΈΈ μ μλ‹¤. |

| Forward Proxy μ„λ²„ | λ‚΄λ¶€λ§μ—μ„ ν΄λΌμ΄μ–ΈνΈμ™€ Proxy μ„λ²„κ°€ ν†µμ‹ ν•μ—¬ μΈν„°λ„·μ„ ν†µν•΄ μ™Έλ¶€μ—μ„ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¨λ‹¤. |
| --- | --- |
| Reverse Proxy μ„λ²„ | λ‚΄λ¶€λ§μ—μ„ Proxy μ„λ²„μ™€ λ‚΄λ¶€λ§μ„λ²„κ°€ ν†µμ‹ ν•μ—¬ μΈν„°λ„·μ„ ν†µν•΄ μ”μ²­μ΄ λ“¤μ–΄μ¤λ©΄ Proxy μ„λ²„κ°€ λ°›μ•„ μ‘λ‹µν•΄μ¤€λ‹¤. |




<aside>
π’΅ 3μ£Όμ°¨ λ‚΄μ©
`ν¬μ›λ“ ν”„λ΅μ‹` β†’ λ λ‹¤λ¥Έ μ™Έλ¶€(λ‹¤λ¥Έ μ»΄ν“¨ν„°) μ„λ²„λ΅ μ”μ²­μ„ λ³΄λ‚΄μ£Όλ” κ²ƒ
`λ¦¬λ²„μ¤ ν”„λ΅μ‹` β†’ λ‚΄λ¶€(κ°™μ€ μ»΄ν“¨ν„°)μ λ‹¤λ¥Έ μ„λ²„λ΅ μ”μ²­μ„ λ³΄λ‚΄μ£Όλ” κ²ƒ
</aside>