# 4주차 키워드 정리

---

## 외래키

**외래 키(Foreign Key, FK)**는 다른 테이블의 기본키(PK)를 참조하는 속성을 말한다.

예시를 통해 확인해보자.

![외래 키의 예시. 현재 ‘sale_post’ 테이블의 ‘member_id’ 속성은 ‘member’ 테이블의 PK ‘member_id’를 참조하는 외래 키이다.](https://github.com/SSUMC-6th/Spring_Boot_A/assets/67828333/8d7539c4-c6bc-41da-bc73-42164effcede)

외래 키의 예시. 현재 ‘sale_post’ 테이블의 ‘member_id’ 속성은 ‘member’ 테이블의 PK ‘member_id’를 참조하는 외래 키이다.

위와 같이, 다른 테이블의 기본 키를 참조하여 하나의 속성으로 사용하면, 이는 외래 키가 된다.
외래 키는 **참조 무결성 제약**에 따라 반드시 참조하는 테이블의 기본 키(PK)이어야 하며, 외래 키의 값은 NULL이거나 참조하는 테이블의 기본 키 값 중 하나와 동일해야 한다.

## 기본키

**기본 키(Primary Key, PK)**는 `유일성`과 `최소성`을 만족하는 후보 키 중 선택한 하나의 키를 뜻한다.

후보 키부터 알아보자.

> 후보 키(Candidate Key)란?
> </br> ⇒ 테이블에서 각 행을 유일하게 식별할 수 있으며, 최소한의 속성의 집합.
> </br> ⇒ 유일성과 최소성을 만족한다.


`유일성`: 테이블에서 값이 중복되지 않는다. ⇒ 해당 값을 통해 각 행을 식별할 수 있다.</br>
`최소성`: 유일성을 만족하면서 속성의 개수가 가장 적다. ⇒ 가장 적은 개수의 속성 집합만으로, 유일성을 만족한다.

즉, 이러한 후보 키 중 하나를 선택하면, 이것이 기본 키가 된다.

## ER 다이어그램

**ER 다이어그램**은 ER 모델(Entity-Relationship Model)을 표현한 결과물이다.

> **ER 모델(Entity-Relationship Model)**이란? </br>
> 개체와 개체 간의 관계를 기본 요소를 이용하여 현실 세계의 무질서한 데이터를 개념적인 논리 데이터로 표현하기 위한 개념적 데이터 모델 중 하나이다. 
> </br>ER 모델은 개체(Entity) 타입과 관계(Relationship) 타입을 이용해 현실 세계를 개념적으로 표현한다.

ER 다이어그램에선 아래와 같은 기호를 통해 여러 타입과 의미를 나타낸다.

| 기호 | 의미 |
  | --- | --- |
| 사각형 | 개체 타입 |
| 마름모 | 관계 타입 |
| 타원 | 속성 |
| 이중 타원 | 복합 속성 |
| 밑줄 타원 | 기본 키 속성 |
| 복수 타원 | 복합 속성 |
| 관계 | 1:1, 1:N, N:M 등의 개체 간 관계를 나타낸다. |
| 선, 링크 | 개체 타입과 속성을 연결한다. |

## 복합 키

<strong>복합 키(Composite Key)</strong>는 2개 이상의 컬럼으로 이루어진 후보 키를 뜻한다. 여러 컬럼이 합쳐진 키이므로 ‘복합’이란 단어를 사용한다.

예시로, 학생들의 수강신청 행위를 저장하기 위해 ‘수강신청’ 테이블을 만들었다고 가정하자. 이때, `대체 키(Surrogate Key)`를 사용하지 않고자 한다면, ‘학생’ 컬럼과 ‘과목’ 컬럼을 묶어 하나의 후보 키로 설정할 수 있다. 즉, `(학생, 과목)`이라는 **복합 키**도 하나의 후보 키가 된다는 말이다.

## 연관관계

<strong>연관관계(Relationship)</strong>는 DBMS에서 테이블들이 연결되어 있는 방식을 뜻한다. 연관관계는 테이블 간의 연관성을 나타낸다.

연관관계는 3가지의 유형이 있다. (좌측 테이블을 A, 우측 테이블을 B라고 하자.)

- **일 대 일 (1:1)**: A의 특정 튜플 1개는 B의 특정 튜플 1개와 연관되어 있다.
- **일 대 다 (1:N)**: A의 특정 튜플 1개는 B의 특정 튜플들 여러 개(1개 이상)와 연관되어 있다.
- **다 대 다 (N:M)**: A의 특정 튜플들 여러 개는 B의 특정 튜플들 여러 개와 연관되어 있다.

## 정규화

<strong>정규화(Normalization)</strong>는 테이블의 속성들이 상호 종속적인 관계를 갖는 특성을 이용해, 테이블을 무손실 분해하는 과정이다.

정규화의 목적은 아래와 같은 것들이 있다.

- 데이터 구조의 안정성 및 무결성 유지
- 릴레이션을 데이터베이스 내에서 표현 가능하도록 변환
- 효과적인 검색 알고리즘 생성
- 데이터 중복 배제를 통해 **이상**(Anomaly)의 발생 방지 및 자료 저장 공간의 최소화

정규화 과정은 아래와 같다.

`비정규형 → 제1정규형 → 제2정규형 → 제3정규형 → BCNF → 제4정규형 → 제5정규형`

각 단계에서 다음 단계로 넘어가기 위해서는 아래와 같은 요건을 만족하여야 한다.

`비정규 릴레이션 → 제1정규형`: 테이블의 속성들의 도메인의 모든 값이 원자값(Atomic Value)이어야 한다.

`제1정규형 → 제2정규형`: 테이블이 제1정규형이고, 모든 비주요 속성(기본키가 아닌 속성)이 기본 키에 대해 완전 함수적 종속을 만족한다.

`제2정규형 → 제3정규형`: 테이블이 제2정규형이고, 모든 비주요 속성이 기본 키에 데해 이행적 함수적 종속을 만족하지 않는다.

`제3정규형 → BCNF`: 테이블의 모든 결정자가 후보 키이다.

`BCNF → 제4정규형`: 테이블에 다치 종속이 존재할 경우, 테이블의 모든 속성이 해당 종속의 결정자에 대해 함수적 종속 관계를 만족한다.

`제4정규형 → 제5정규형`: 테이블의 모든 조인 종속이 테이블의 후보 키를 통해서만 성립된다.


## 반 정규화

<strong>반정규화(Denormalization)</strong>는 정규화된 데이터 모델을 의도적으로 통합, 중복, 분리하여 정규화 원칙을 위배하는 행위를 뜻한다.

반정규화의 목적은 다음과 같다.

- 시스템의 성능 향상
- 관리 효율성 증가
- 개발 및 운영의 편의성 향상

하지만, 반정규화 사용 시 아래와 같은 문제점이 발생할 수 있다.

- 데이터의 일관성 및 정합성 저하
- 반대로 성능 저하