# 8주차 키워드 정리

---

## Spring의 의존성 주입

여러 클래스 또는 인스턴스가 있을 때, 특정 클래스가 다른 클래스를 필드 등으로 참조하고 있는 상황이 있다. 이때, 해당 클래스의 인스턴스가 생성될 때, 참조하고 있는 클래스에 대한 인스턴스를 연결시켜주는 행위를 의존관계 주입이라고 한다.

의존관계 주입에는 크게 4가지 방법이 있다.

- **생성자 주입**
- **setter 주입(또는 수정자 주입)**
- **필드 주입**
- **일반 메소드 주입**

### ⭐생성자 주입⭐(권장)

생성자를 이용하여 의존관계를 주입하는 방식이다.

- 생성자 호출 시점에 **딱 1번만 호출되는 것이 보장**된다.
- 위 특징을 이용해, 의존관계를 수정하지 못하도록 setter 미사용, final 필드 이용 등의 코드 작성까지 이용하여 **불변, 필수 의존관계**에 사용된다.

> **중요 포인트**
> 생성자가 1개만 있으면, `@Autowired` 어노테이션을 생략할 수 있다! 스프링이 해당 빈을 등록할 때 선택할 수 있는 생성자가 1개이기 때문이다.
> <br/> 이는 코드를 작성할 때 매우 빈번하게 사용할 수 있는 포인트이다.

### setter 주입(수정자 주입)

setter라 불리는 필드의 값을 변경하는 수정자 메소드를 통해서 의존관계를 주입하는 방식이다.

- 선택적이고(아래 알아둘 점 참고), 변경 가능성이 있는 의존관계에 사용된다.

> **알아둘 점**
> **`@Autowired` 어노테이션의 기본 동작**은 **주입할 대상이 없으면 오류가 발생한다.**
> <br/> 주입할 대상이 없어도 동작하게 하려면, `@Autowired(required = false)`로 지정하면 된다.


### 필드 주입

필드에 바로 주입하는 방식입니다.

- 코드가 간결하지만, **외부 변경이 불가능해 테스트하기 힘들다는 치명적 단점이 있다.**
- 즉, DI 프레임워크가 없으면 아무것도 할 수 없다.
- **⇒ 아래의 경우 말고는 사용하지 말자!**
    - 어플리케이션의 실제 코드와 관계 없는 테스트 코드
    - 스프링 설정을 목적으로 하는 `@Configuration` 같은 곳

### 일반 메소드 주입

일반 메소드를 통해서 의존관계를 주입하는 방식이다.

- 한 번에 여러 필드를 주입받을 수 있다.
- 일반적으로 잘 사용하지 않는다.


## IoC 컨테이너

개발자가 객체의 생성, 삭제와 같은 흐름을 직접 제어하지 않고, 이러한 권한을 스프링에게 위임해 스프링이 이를 대신 처리하는 것을 `IoC`, Inversion Of Control라고 한다. 이러한 IoC를 담당하는 `Spring Container`를 `Ioc Container`라고도 한다.


## RestContollerAdvice

`@RestControllerAdvice` 어노테이션은 `@ControllerAdvice`에 `@ResponseBody` 어노테이션을 끼얹은 형태라고 할 수 있다.

이때, `@ResponseBody`는 응답을 Response Body에 JSON의 형태로 매핑시키는 역할을 한다.

`@ControllerAdvice`는 `@ExceptionHandler`가 선언된 컨트롤러 클래스 하위에서 발생하는 예외만 처리하도록 하는 것과 달리, 모든 컨트롤러의 하위에서 발생하는 예외를 ‘**전역적으로 처리**’하는 역할을 한다. 즉, 단 하나의 예외처리 핸들러 클래스를 통해 모든 예외를 처리할 수 있게 되는 것이다.

## lombok

`Lombok`이란, 어노테이션 기반으로 코드를 자동완성 해주는 라이브러리이다. Lombok을 통해 빈번히 작성이 필요한 Getter, Setter, Constructor 등과 같은 코드를 직접 작성할 필요 없이 자동완성되도록 할 수 있다.

Lombok의 장점은 다음과 같다.

- 어노테이션 기반의 코드 자동 생성을 통한 생산성 향상
- 반복되는 코드 다이어트를 통한 가독성 및 유지보수성 향상
- Getter, Setter 외에 빌더 패턴이나 로그 생성 등, 다양한 방면으로 활용 가능