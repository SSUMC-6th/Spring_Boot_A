Keyword: 하드웨어 인터럽트

> 인터럽트:
시스템에서 발생한 다양한 종류의 이벤트, 혹은 그런 이벤트를 알리는 매커니즘

인터럽트가 발생하면 CPU에서는 인터럽트 처리를 위해 
**즉각적으로 커널 모드에서 커널 코드**를 실행

즉, 언제든지 인터럽트가 발생하는 순간 실행 중이던 사용자 프로그램을 마무리한 후,
인터럽트 처리를 위해 커널이 동작권을 넘겨받아서 관련 처리를 하게 됨
> 

### 인터럽트 종류

- 전원(power)에 문제가 생겼을 때
- I/O 작업이 완료됐을 때
- 시간이 다 됐을 때(timer 관련)
- 유저 레벨에서 발생하는 inturrupt :  `TRAP`
    - 0으로 나눴을 때
    - 잘못된 메모리 공간에 접근을 시도할 때 …etc

### 하드웨어 인터럽트

하드웨어가 발생시키는 인터럽트로, CPU가 아닌 다른 하드웨어 장치가 CPU에 어떤 사실을 알려주거나 CPU 서비스를 요청해야 할 경우 발생시킨다.

### 소프트웨어 인터럽트

소프트웨어가 발생시키는 인터럽트로, 소프트웨어(사용자 프로그램)가 스스로 인터럽트 라인을 세팅한다.

- ex) 예외 상황(Exception), system call

### 인터럽트 동작 과정

1. 프로그램 실행 중에 인터럽트가 발생하거나 시스템 콜을 호출하게 되면 유저 모드 → 커널 모드로 전환
2. 커널 모드에서, 방금 전까지 실행 중이던 프로그램의 현재 CPU 상태를 저장함 (나중에 이어서 실행할 수 있도록)
    - 현재까지 수행중이었던 상태를 해당 process의 **PCB(Process Control Block)**에 저장
    - PC(Program Counter)에 다음에 실행할 명령의 주소를 저장
3. 커널이 발생했던 인터럽트나 시스템 콜을 직접 처리. 즉, CPU에서 ‘커널 코드’가 실행됨
4. 모든 처리가 완료되면 중단됐던 프로그램의 CPU 상태를 복원
5. 다시 통제권을 프로그램에게 반환 (커널 모드→유저 모드)
6. PC값을 복원하여 프로그램이 이어서 실행됨 (유저 모드)